<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="http://localhost/~rubylee/css/style.css">
<link rel="stylesheet" href="styles/facebookchat.css">
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src="http://localhost/~rubylee/js/loginpopup.js"></script>
<script src="http://localhost/~rubylee/js/facebooklogin.js"></script>

<script src="js/globe.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="js/jquery.js"></script>
<script src="http://www.webglearth.com/v2/api.js"></script>


</head>
<header >

<h2>Spinning News</h2> 

<div id="status">
</div>
<a href="myprofile.html"><button>My Profile</button></a>
<button id="logoutbtn" type="button" onclick="fblogout();">Logout</button>


<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close"> X </span>
    <h3>Please login through Facebook</h3>

    <button id="loginbtn" type="button" onclick="checkLoginState();">Connect to Facebook</button>
  </div>

</div>






<script src="http://localhost/~rubylee/js/loginpopup.js"></script>

</header>

<script>
/*
  two fingers swipe up and down || one finger placed and second moves == zoom
  three fingers swipe left right == rotates
*/

function initialize() {
        var options = {
          //sky: false,
          atmosphere: false,


         

          dragging: true,
          tilting: false,
          zooming: true,
          center: [1.0592701, 122.1097943],
          zoom: 2,
          scrollWheelZoom: true,


        };

        earth = new WE.map('earth', options);
        var natural = WE.tileLayer('http://data.webglearth.com/natural-earth-color/{z}/{x}/{y}.jpg', {
          tileSize: 256,
          tms: true
        });
        natural.addTo(earth);

        var marker1 = WE.marker([51.5, -0.09]).addTo(earth);
        marker1.bindPopup("<b>London</b><br>New runway at Heathrow<br><img src='images/london.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker2 = WE.marker([30.058056, 31.228889]).addTo(earth);
        marker2.bindPopup("<b>Cairo</b><br>Bureau chief in Cairo who was convicted and imprisoned on terrorist charges<br><img src='images/cairo.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker3 = WE.marker([-33.9135298, 18.095567]).addTo(earth);
        marker3.bindPopup("<b>Capetown</b><br>South Africa condemned Australia to their first 5-0<br><img src='images/capetown.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker4 = WE.marker([13.7244425, 100.3529034]).addTo(earth);
        marker4.bindPopup("<b>Bangkok</b><br>Thailand's King Bhumibol dies<br><img src='images/bangkok.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker5 = WE.marker([22.3574371, 113.8408135]).addTo(earth);
        marker5.bindPopup("<b>Hong Kong</b><br>Hong Kong rebel lawmakers protest China<br><img src='images/hongkong.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker6 = WE.marker([43.7181557,-79.518144]).addTo(earth);
        marker6.bindPopup("<b>Toronto</b><br>Toronto International Film Festival 2016<br><img src='images/toronto.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker7 = WE.marker([40.705311, -74.2581977]).addTo(earth);
        marker7.bindPopup("<b>New York City</b><br>Train derails near New York, injuring dozens<br><img src='images/newyork.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker8 = WE.marker([34.0201812, -118.6919312]).addTo(earth);
        marker8.bindPopup("<b>Los Angeles</b><br>Paralympics: Hannah Cockroft backs Los Angeles for 2024 to help grow event<br><img src='images/losangeles.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker9 = WE.marker([-27.3810232, 152.4326883]).addTo(earth);
        marker9.bindPopup("<b>Brisbane</b><br>Voluntary euthanasia: Calls for Queensland parliamentary inquiry<br><img src='images/brisbane.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker10 = WE.marker([-32.0388311, 115.4010385]).addTo(earth);
        marker10.bindPopup("<b>Sydney</b><br>Family of four found dead in Sydney home<br><img src='images/sydney.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker11 = WE.marker([-37.9712368, 144.4926542]).addTo(earth);
        marker11.bindPopup("<b>Melbourne</b><br>Great Ocean Road closed again following heavy rain<br><img src='images/melbourne.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker12 = WE.marker([34.0201812, -118.6919312]).addTo(earth);
        marker12.bindPopup("<b>Perth</b><br>Four boys charged after newly redeveloped school was trashed in Western Australia<br><img src='images/perth.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var marker13 = WE.marker([1.3147268,103.7069291]).addTo(earth);
        marker13.bindPopup("<b>Singapore</b><br>The life and death of a lonely Singapore cow<br><img src='images/singapore.jpg' width='170' height:'auto'><br><a href='article.html' target='_blank'>Read More </a>", {maxWidth: 200, closeButton: true});

        var markerCustom = WE.marker([50, -9], '/img/logo-webglearth-white-100.png', 100, 24).addTo(earth);

        //

        var toner = WE.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.png', {
          attribution: 'Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA.',
          opacity: 0.6
        });
        toner.addTo(earth);
      };

function addSomeMarkers() {
        document.getElementById('addmarkers').disabled = true;

        earth.setView([51.505, 0], 5);
        var marker = WE.marker([51.5, -0.09]).addTo(map);
        marker.bindPopup("", {maxWidth: 150, closeButton: true}).openPopup();

             };
</script>
<script>
     

	//this function can remove a array element.
	Array.remove = function(array, from, to) {
		var rest = array.slice((to || from) + 1 || array.length);
		array.length = from < 0 ? array.length + from : from;
		return array.push.apply(array, rest);
	};

	//this variable represents the total number of popups can be displayed according to the viewport width
	var total_popups = 0;
	
	//arrays of popups ids
	var popups = [];

	//this is used to close a popup
	function close_popup(id)
	{
		for(var iii = 0; iii < popups.length; iii++)
		{
			if(id == popups[iii])
			{
				Array.remove(popups, iii);
				
				document.getElementById(id).style.display = "none";
				
				calculate_popups();
				
				return;
			}
		}	
	}

	//displays the popups. Displays based on the maximum number of popups that can be displayed on the current viewport width
	function display_popups()
	{
		var right = 220;
		
		var iii = 0;
		for(iii; iii < total_popups; iii++)
		{
			if(popups[iii] != undefined)
			{
				var element = document.getElementById(popups[iii]);
				element.style.right = right + "px";
				right = right + 320;
				element.style.display = "block";
			}
		}
		
		for(var jjj = iii; jjj < popups.length; jjj++)
		{
			var element = document.getElementById(popups[jjj]);
			element.style.display = "none";
		}
	}
	
	//creates markup for a new popup. Adds the id to popups array.
	function register_popup(id, name)
	{
		
		for(var iii = 0; iii < popups.length; iii++)
		{	
			//already registered. Bring it to front.
			if(id == popups[iii])
			{
				Array.remove(popups, iii);
			
				popups.unshift(id);
				
				calculate_popups();
				
				
				return;
			}
		}				
		
		var element = '<div class="popup-box chat-popup" id="'+ id +'">';
		element = element + '<div class="popup-head">';
		element = element + '<div class="popup-head-left">'+ name +'</div>';
		element = element + '<div class="popup-head-right"><a href="javascript:close_popup(\''+ id +'\');">&#10005;</a></div>';
		element = element + '<div style="clear: both"></div></div><div class="popup-messages"><div>Your message:</div>';
		element = element + '<div>Your message:</div>';
		element = element + '<textarea></textarea>';
    element = element + '<img>';
    element = element + '<a></a>';
		
		
		
		document.getElementsByTagName("body")[0].innerHTML = document.getElementsByTagName("body")[0].innerHTML + element;	

		popups.unshift(id);
				
		calculate_popups();
		
	}
	
	//calculate the total number of popups suitable and then populate the toatal_popups variable.
	function calculate_popups()
	{
		var width = window.innerWidth;
		if(width < 540)
		{
			total_popups = 0;
		}
		else
		{
			width = width - 200;
			//320 is width of a single popup box
			total_popups = parseInt(width/320);
		}
		
		display_popups();
		
	}
	
	//recalculate when window is loaded and also when window is resized.
	window.addEventListener("resize", calculate_popups);
	window.addEventListener("load", calculate_popups);
	
</script>


<style>
    html, body{padding: 0; margin:0; background-color: #262626; font-family: 'Open Sans'}
      h2{color:#fff; text-align: center; padding: none; }
      p{color: #5d5d5d; text-align: right; padding-right: 30px;}
      #loginbutton{background-color: #898989; border-radius: 8px; border-color: white; padding: 3px 18px; box-shadow: none; color:white;}
      #buttonleft{background-color: #f5f5f5; border-radius: 6px; border-color: #777777; border-width: 1px; padding:15px 30px; font-size: 20px; color: #5e5d5d; margin-left: 60px; margin-bottom: 40px;}
      #buttonright{background-color: #f5f5f5; border-radius: 6px; border-color: #777777; border-width: 1px; padding:15px 30px; font-size: 20px; color: #5e5d5d; margin-right: 60px; float: right;}

      #btnleft{float:right; margin-right: 50px; padding-top: 10px; margin-top:130px;}
      #btnright{float:right; margin-right: 15%; margin-top: 100px;}

      #earth{ position: absolute !important; width: 40%; height: 70%; margin-top: 150px; z-index: -10; margin-left: 15%;}

      /* The Modal (background) */
      .modal {display: none;position: fixed; z-index: 1; padding-top: 100px; left: 0; top: 0; width: 100;height: 100%; overflow: auto; background-color: rgb(0,0,0);background-color: rgba(0,0,0,0.4); }

      .modal-content {background-color: #fefefe;margin: auto;padding: 20px;border: 1px solid #888;width: 40%;}
      .close {color: #aaaaaa;float: right;font-size: 28px;font-weight: bold;}
      .close:hover,.close:focus {color: #000;text-decoration: none;cursor: pointer;}

      h3 {text-align: center;}
      button{background: #3498db;border: none;color: #fff;font-size: 14px;font-weight: bold;border-radius: 5px;}
      button#loginbtn {width: 200px;height: 50px;margin: 50px 0;display: block;background: #3498db;color: #fff;margin-left: 29%;}
      button:hover {background: #2980b9;color: #1b5377;}
      button#logoutbtn {display:none; float: left;} 
      .btn {margin-top:45px; width: 150px; height:40px;}

      #status {float:left; padding-right: 10px; margin-left:15%; color:#fff; font-size: 18px}

      #chat{height:25px; ;line-height:1; position: fixed; width:100%; bottom: 0; left:0; padding: 0 5px; z-index: 10; background: #1e1e1e; text-decoration: none; padding-top:13px; color:white; padding-left: 20px; font-size: 9pt;}

</style>


<body onload="initialize()">

    <div id="earth"></div>
    <div id="coords"></div>

    <div id="btnright">
    <button class="btn" type="button">Dashborad</button>
    <br>
    <button class="btn" type="button">User1 <br>What they read</button>
    <br>
    <button class="btn" type="button">User2 <br>What they read</button>
    <br>
    <button class="btn" type="button">User3 <br>What they read</button>
    </div>

    <div id="btnleft">
    <button class="btn" type="button"><input type="checkbox" name="option1" value="category1"> Category1</button>
    <br>
    <button class="btn" type="button"><input type="checkbox" name="option2" value="category2"> Category2</button>
    <br>
    <button class="btn" type="button"><input type="checkbox" name="option3" value="category3"> Category3</button>
    </div>
	<div class="chat-sidebar">
			<div class="sidebar-name">
				<!-- Pass username and display name to register popup -->
				<a href="javascript:register_popup('narayan-prusty', 'Narayan Prusty');">
					<img width="30" height="30" src="" />
					<span>Narayan Prusty</span>
				</a>
			</div>
			<div class="sidebar-name">
				<a href="javascript:register_popup('qnimate', 'QNimate');">
					<img width="30" height="30" src="" />
					<span>QNimate</span>
				</a>
			</div>
			<div class="sidebar-name">
				<a href="javascript:register_popup('qscutter', 'QScutter');">
					<img width="30" height="30" src="" />
					<span>QScutter</span>
				</a>
			</div>
			<div class="sidebar-name">
				<a href="javascript:register_popup('qidea', 'QIdea');">
					<img width="30" height="30" src="" />
					<span>QIdea</span>
				</a>
			</div>
			<div class="sidebar-name">
				<a href="javascript:register_popup('qazy', 'QAzy');">
					<img width="30" height="30" src="" />
					<span>QAzy</span>
				</a>
			</div>
			<div class="sidebar-name">
				<a href="javascript:register_popup('qblock', 'QBlock');">
					<img width="30" height="30" src="" />
					<span>QBlock</span>
				</a>
			</div>
		</div>


    
<a id="chat" href="chat/chat.php">Chatroom</a>
</body>
</html>
</html>